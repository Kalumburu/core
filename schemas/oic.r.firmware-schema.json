{
  "id": "http://openinterconnect.org/schemas/oic.r.firmware#",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "description" : "Copyright (c) 2018 Open Connectivity Foundation, Inc. All rights reserved.",
  "title": "firmware update",
  "definitions": {
    "oic.r.firmware": {
      "type": "object",
      "properties": {
        "version":
        {
            "type" : "string",
            "description": "The current firmware version",
            "readOnly" : true
        },
        "newversion" :
        {
            "type" : "boolean",
            "description": "The new firmware version, to replace the current firmware version",
            "readOnly" : false
        },
        "scheduledupdate" :
        {
            "type" : "string",
            "description": "scheduled update modes, to be started at time of 'updatetime'",
            "readOnly" : false,
            "enum" : [
                "idle",
                "check new image",
                "download image",
                "update using downloaded image",
                "download and upgrade image"
            ]
        },
        "packageurl" :
        {
            "type" : "string",
            "description": "The url to the firmware package, can be https/coaps",
            "readOnly" : false
        },
        "vendor" :
        {
            "type" : "string",
            "description": "The vendor name of the firmware",
            "readOnly" : false
        },
        "model" :
        {
            "type" : "string",
            "description": "the model number of firmware",
            "readOnly" : true
        },
        "state" :
        {
            "type" : "string",
            "description": "The different states of the upgrade process",
            "readOnly" : true,
            "enum" : [
                "idle",
                "downloading",
                "downloaded",
                "updating"
            ]
        },
        "result" :
        {
            "type" : "string",
            "description": "result/error of the different stages of the upgrade process",
            "readOnly" : true,
            "enum" : [
                "ok",
                "success",
                "not enough flash",
                "out of RAM",
                "connection lost",
                "package integrety check failure",
                "invalid package url",
                "firmware update failed",
                "unsupported protocol",
                "unknown"
            ]
        },
        "scheduledupdatetime" :
        {
            "type" : "string",
            "description": "scheduled time to do the update action, IETF RFC 3339",
            "readOnly" : false,
            "pattern": "^([0-9]{4})-(1[0-2]|0[1-9])-(3[0-1]|2[0-9]|1[0-9]|0[1-9])$"

        },
        "lastupdate" :
        {
            "type" : "string",
            "description": "time of the last successfull firmware update, IETF RFC 3339",
            "readOnly" : true,
            "pattern": "^([0-9]{4})-(1[0-2]|0[1-9])-(3[0-1]|2[0-9]|1[0-9]|0[1-9])$"
        },
        "signage" :
        {
            "type" : "string",
            "description": "used signage of the firmware pacakage",
            "readOnly" : false,
            "enum" : [
                "vendor"
            ]
        }
      }
    }
  },
  "type": "object",
  "allOf": [
    {"$ref": "oic.core-schema.json#/definitions/oic.core"},
    {"$ref": "#/definitions/oic.r.firmware"}
  ],
  "required": ["verson", "newversion", "packageurl", "state", "result"]
}
