{
  "id": "http://openconnectivityfoundation.github.io/core//schemas/oic.r.softwareupdate#",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "description" : "Copyright (c) 2018 Open Connectivity Foundation, Inc. All rights reserved.",
  "title": "software update",
  "definitions": {
    "oic.r.softwareupdate": {
      "type": "object",
      "properties": {
        "nsv" :
        {
            "type" : "boolean",
            "description": "The new firmware version, to replace the current firmware version",
            "readOnly" : false
        },
        "action" :
        {
            "type" : "string",
            "description": "scheduled update actions, to be started at time of 'updatetime'",
            "readOnly" : false,
            "enum" : [
                "idle",
                "isac",
                "isvv",
                "upgrading"
            ]
        },
        "packageurl" :
        {
            "type" : "string",
            "description": "The url to the firmware package, can be https/coaps",
            "readOnly" : false
        },
        "state" :
        {
            "type" : "string",
            "description": "The different states of the upgrade process",
            "readOnly" : true,
            "enum" : [
                "idle",
                "nsa",
                "svv",
                "sva",
                "upgrading"
            ]
        },
        "result" :
        {
            "type" : "integer",
            "description": "result/error of the different stages of the upgrade process",
            "readOnly" : true,
            
        },
        "scheduledupdatetime" :
        {
            "type" : "string",
            "description": "scheduled time to do the update action, IETF RFC 3339",
            "readOnly" : false,
            "pattern": "^([0-9]{4})-(1[0-2]|0[1-9])-(3[0-1]|2[0-9]|1[0-9]|0[1-9])$"

        },
        "lastupdate" :
        {
            "type" : "string",
            "description": "time of the last successfull firmware update, IETF RFC 3339",
            "readOnly" : true,
            "pattern": "^([0-9]{4})-(1[0-2]|0[1-9])-(3[0-1]|2[0-9]|1[0-9]|0[1-9])$"
        },
        "signage" :
        {
            "type" : "string",
            "description": "used signage of the firmware pacakage",
            "readOnly" : false,
            "enum" : [
                "vendor"
            ]
        }
      }
    }
  },
  "type": "object",
  "allOf": [
    {"$ref": "http://openconnectivityfoundation.github.io/core/oic.core-schema.json#/definitions/oic.core"},
    {"$ref": "#/definitions/oic.r.softwareupdate"}
  ],
  "required": ["packageurl", "state", "result"]
}
